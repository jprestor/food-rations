import TelegramBot from 'node-telegram-bot-api';

/*
*bold \*text*
_italic \*text_
__underline__
~strikethrough~
||spoiler||
*bold _italic bold ~italic bold strikethrough ||italic bold strikethrough spoiler||~ __underline italic bold___ bold*
[inline URL](http://www.example.com/)
[inline mention of a user](tg://user?id=123456789)
![üëç](tg://emoji?id=5368324170671202286)
`inline fixed-width code`
*/

/*
`–ó–∞–∫–∞–∑ ‚Ññ 1`\n\n
*–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:*\n
_–ü–∏—Ü—Ü–∞ —Å –ø–∞—Ä–º—Å–∫–æ–π –≤–µ—Ç—á–∏–Ω–æ–π_ x1, 450—Ä\n
_–§—É–∞–≥—Ä–∞_ x1, 1000—Ä\n
_–§–∞—Ä—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Å—Ç—Ä—ã–π –ø–µ—Ä—á–∏–∫_ x3, 750—Ä\n
_–°—É–ø —Å –≥–æ—Ä–æ—Ö–æ–º –∏ –∫–æ–ø—á–µ–Ω–æ—Å—Ç—è–º–∏_ x2 500—Ä\n
_–°—Ç–æ–ª–æ–≤—ã–µ –ø—Ä–∏–±–æ—Ä—ã_ x3, 0—Ä\n\n

–¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤: 2700—Ä\n
–¶–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏: 300—Ä\n
–°–∫–∏–¥–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É: 0—Ä\n
*__–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞__: 3000—Ä*\n\n

*–ö–ª–∏–µ–Ω—Ç:*\n
–í–∞—Å–∏–ª–∏–π –í, [89218601111](89218601111)\n\n

*–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:*\n
–ò–æ–∞–Ω–Ω–∞ –∫—Ä–æ–Ω—à—Ç–∞–¥—Ç—Å–∫–æ–≥–æ 7, –∫–≤ 31, 1 –ø–æ–¥—ä–µ–∑–¥, 3 —ç—Ç–∞–∂, –¥–æ–º–æ—Ñ–æ–Ω –µ—Å—Ç—å
*/

export default {
  testBotNotify: async (ctx, next) => {
    try {
      const bot = new TelegramBot(process.env.TELEGRAM_BOT_TOKEN);

      bot
        .sendMessage(
          process.env.TELEGRAM_ADMIN_CHAT_ID,
          '`–ó–∞–∫–∞–∑ ‚Ññ1`\n\n*–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:*\n_–ü–∏—Ü—Ü–∞ —Å –ø–∞—Ä–º—Å–∫–æ–π –≤–µ—Ç—á–∏–Ω–æ–π_ x1, 450—Ä\n_–§—É–∞–≥—Ä–∞_ x1, 1000—Ä\n_–§–∞—Ä—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Å—Ç—Ä—ã–π –ø–µ—Ä—á–∏–∫_ x3, 750—Ä\n_–°—É–ø —Å –≥–æ—Ä–æ—Ö–æ–º –∏ –∫–æ–ø—á–µ–Ω–æ—Å—Ç—è–º–∏_ x2 500—Ä\n_–°—Ç–æ–ª–æ–≤—ã–µ –ø—Ä–∏–±–æ—Ä—ã_ x3, 0—Ä\n\n–¶–µ–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤: 2700—Ä\n–¶–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏: 300—Ä\n–°–∫–∏–¥–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É: 0—Ä\n*__–ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞__: 3000—Ä*\n\n*–ö–ª–∏–µ–Ω—Ç:*\n–í–∞—Å–∏–ª–∏–π –í, [89218601111](89218601111)\n\n*–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:*\n–ò–æ–∞–Ω–Ω–∞ –∫—Ä–æ–Ω—à—Ç–∞–¥—Ç—Å–∫–æ–≥–æ 7, –∫–≤ 31, 1 –ø–æ–¥—ä–µ–∑–¥, 3 —ç—Ç–∞–∂, –¥–æ–º–æ—Ñ–æ–Ω –µ—Å—Ç—å',
          {
            parse_mode: 'MarkdownV2',
          },
        )
        .catch((error) => {
          console.error(
            '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ telegram-—Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É:',
            error.message,
          );
        });

      ctx.body = 'ok';
    } catch (err) {
      ctx.body = err;
    }
  },
};
